<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,viewport-fit=cover"
    />
    <title>WeddingBar — Costs</title>

    <!-- Link CSS -->
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="/weddingbar/icons/icon-192.png" type="image/png" />
    <link rel="apple-touch-icon" href="/weddingbar/icons/icon-192.png" />

    <!-- PWA manifest -->
    <link rel="manifest" href="/weddingbar/manifest.json" />

    <meta name="theme-color" content="#071025" />
  </head>
  <body>
    <main class="app">
      <header class="app-header">
        <div class="hdr-left">
          <h1 class="app-title">
            Wedding Costs<span
              id="nextStepsBtn"
              style="font-size: 18px; color: #5ec293; cursor: pointer"
              >Next Steps</span
            >
          </h1>
        </div>

        <div class="hdr-right">
          <h1 class="app-title toggle-controls" id="toggleControlsBtn">
            Add Costs
            <span class="toggle-arrow">▲</span>
          </h1>
        </div>
      </header>
      <section
        id="nextStepsPanel"
        class="card"
        style="display: none; padding: 16px"
      >
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <h2 style="margin: 0">Next Steps</h2>
          <button
            id="nextStepsBackBtn"
            style="
              padding: 6px 12px;
              background: rgba(255, 255, 255, 0.05);
              color: white;
              border: none;
              border-radius: 8px;
              cursor: pointer;
            "
          >
            Back
          </button>
        </div>

        <div style="margin-top: 12px">
          <input
            id="nextStepInput"
            type="text"
            placeholder="Add next step..."
            style="
              width: 100%;
              padding: 10px;
              border-radius: 8px;
              border: none;
              background: var(--card);
              color: white;
            "
          />

          <input
            id="nextStepDeadline"
            type="date"
            style="
              margin-top: 8px;
              padding: 10px;
              width: 100%;
              border-radius: 8px;
              border: none;
              background: var(--card);
              color: white;
            "
          />

          <button
            id="addNextStepBtn"
            class="btn"
            style="margin-top: 10px; width: 100%"
          >
            Add Step
          </button>
        </div>

        <div id="nextStepsList" style="margin-top: 20px">
          <!-- tasks injected here -->
        </div>
      </section>

      <div id="weddingCostsWrapper">
        <section class="controls card" aria-label="Controls">
          <div class="inputs">
            <input id="name" type="text" placeholder="Item (e.g., Caterer)" />
            <input id="paid" type="number" placeholder="Paid (e.g., 5000)" />
            <input id="total" type="number" placeholder="Total (e.g., 30000)" />
            <label class="chk">
              <input id="booked" type="checkbox" />
              <span class="box" aria-hidden="true"></span>
              <span class="chk-label">Booked</span>
            </label>
          </div>
          <div class="actions">
            <button id="addBtn" class="btn">Add / Save</button>
            <button id="clearBtn" class="btn ghost">Clear</button>
          </div>
        </section>

        <!-- Chart container: layout is dynamic via CSS/JS -->
        <section id="summarySection" class="card" style="margin-bottom: 12px">
          <div style="display: flex; justify-content: space-between">
            <div>
              <div class="muted" style="font-size: 12px">Total Paid</div>
              <div id="summaryPaid" style="font-size: 18px; font-weight: 700">
                ₱0
              </div>
            </div>
            <select
              id="sortSelect"
              class="inputs"
              style="
                padding: 12px;
                border-radius: 10px;
                background: var(--card);
                color: white;
                border: 0;
                margin-left: auto;
                margin-right: 20px;
              "
            >
              <option value="none">Sort by…</option>
              <option value="booked" selected>Booked → Not booked</option>
              <option value="totalHigh">Highest Total</option>
              <option value="totalLow">Lowest Total</option>
            </select>
            <div>
              <div class="muted" style="font-size: 12px">Grand Total</div>
              <div id="summaryTotal" style="font-size: 18px; font-weight: 700">
                ₱0
              </div>
            </div>
          </div>
        </section>

        <section id="chartSection" class="chart card" aria-label="Cost chart">
          <div id="bars" class="bars horizontal" role="list" aria-live="polite">
            <!-- Bars injected here by script.js -->
          </div>
        </section>

        <section id="detailPanel" class="detail card" aria-hidden="true">
          <!-- Tapped bar details show here -->
        </section>
      </div>
      <div
        id="uploadLoader"
        style="display: none; margin-top: 10px; text-align: center"
      >
        <div class="loader-spinner"></div>
        <div style="font-size: 12px; margin-top: 6px; color: var(--muted)">
          Uploading…
        </div>
      </div>
    </main>
    <!-- Fullscreen image preview -->
    <div
      id="imgPreviewOverlay"
      style="
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.85);
        z-index: 9999;
        align-items: center;
        justify-content: center;
      "
    >
      <img
        id="imgPreviewFull"
        src=""
        style="max-width: 90%; max-height: 90%; border-radius: 10px"
      />
    </div>

    <!-- Fullscreen Viewer -->
    <div
      id="imgViewerOverlay"
      style="
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.9);
        z-index: 9999;
        align-items: center;
        justify-content: center;
      "
    >
      <!-- Close Button -->
      <button
        id="viewerCloseBtn"
        style="
          position: absolute;
          top: 20px;
          right: 20px;
          width: 36px;
          height: 36px;
          border-radius: 8px;
          border: none;
          background: rgba(255, 255, 255, 0.2);
          color: white;
          font-size: 20px;
          cursor: pointer;
          z-index: 1;
        "
      >
        ×
      </button>

      <!-- LEFT NAV -->
      <button
        id="viewerPrevBtn"
        style="
          position: absolute;
          right: 70px;
          top: 95%;
          transform: translateY(-50%);
          width: 42px;
          height: 42px;
          border: none;
          border-radius: 12px;
          background: rgba(255, 255, 255, 0.18);
          backdrop-filter: blur(6px);
          color: white;
          font-size: 22px;
          cursor: pointer;
          z-index: 10;
        "
      >
        ‹
      </button>

      <!-- RIGHT NAV -->
      <button
        id="viewerNextBtn"
        style="
          position: absolute;
          right: 20px;
          top: 95%;
          transform: translateY(-50%);
          width: 42px;
          height: 42px;
          border: none;
          border-radius: 12px;
          background: rgba(255, 255, 255, 0.18);
          backdrop-filter: blur(6px);
          color: white;
          font-size: 22px;
          cursor: pointer;
          z-index: 10;
        "
      >
        ›
      </button>

      <img
        id="imgViewerFull"
        style="
          max-width: 90%;
          max-height: 90%;
          border-radius: 10px;
          transition: transform 0.2s;
        "
      />
    </div>

    <!-- Delete Confirmation -->
    <div
      id="confirmDeleteOverlay"
      style="
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 10000;
        align-items: center;
        justify-content: center;
      "
    >
      <div
        style="
          background: #0b152b;
          padding: 20px;
          border-radius: 10px;
          width: 260px;
          text-align: center;
        "
      >
        <div style="margin-bottom: 12px">
          Are you sure you want to delete this image?
        </div>
        <div style="display: flex; gap: 10px; justify-content: center">
          <button id="confirmDeleteYes" class="btn">Delete</button>
          <button id="confirmDeleteNo" class="btn ghost">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Use module imports in script.js -->
    <script type="module" src="script.js"></script>
  </body>
</html>
