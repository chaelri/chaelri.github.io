{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/ccayno/Documents/chaelri.github.io/my-realtime-app/src/app/page.tsx"],"sourcesContent":["'use client';\nimport { useEffect, useState, useRef } from 'react';\nimport { supabase } from '@/lib/supabase';\n\n// 1. Generic SVG Loading Dots Component\nconst LoadingDots = () => (\n  <div className=\"flex items-center gap-1.5 py-1 px-1\">\n    <div className=\"w-1.5 h-1.5 bg-zinc-400 rounded-full animate-bounce [animation-duration:0.8s] [animation-delay:-0.3s]\"></div>\n    <div className=\"w-1.5 h-1.5 bg-zinc-400 rounded-full animate-bounce [animation-duration:0.8s] [animation-delay:-0.15s]\"></div>\n    <div className=\"w-1.5 h-1.5 bg-zinc-400 rounded-full animate-bounce [animation-duration:0.8s]\"></div>\n  </div>\n);\n\nexport default function Home() {\n  const [messages, setMessages] = useState<any[]>([]);\n  const [input, setInput] = useState('');\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  // Auto-scroll to bottom whenever messages list updates\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  useEffect(() => {\n    // 2. Fetch existing messages on load\n    const fetchMessages = async () => {\n      const { data } = await supabase\n        .from('messages')\n        .select('*')\n        .order('created_at', { ascending: true });\n      if (data) setMessages(data);\n    };\n\n    fetchMessages();\n\n    // 3. Realtime Subscription\n    const channel = supabase\n      .channel('chat-room')\n      .on('postgres_changes', \n        { event: 'INSERT', schema: 'public', table: 'messages' }, \n        (payload) => {\n          setMessages((prev) => {\n            // Check if we have an optimistic \"loading\" message matching this content\n            const optimisticIdx = prev.findIndex(m => m.content === payload.new.content && m.isSending);\n            \n            if (optimisticIdx !== -1) {\n              // Replace loading dots with the real message from DB\n              const updated = [...prev];\n              updated[optimisticIdx] = payload.new;\n              return updated;\n            }\n            // Otherwise, it's a message from someone else, just append it\n            return [...prev, payload.new];\n          });\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, []);\n\n  // 4. Send Message Logic\n  const sendMessage = async (e: React.FormEvent) => {\n    e.preventDefault();\n    const text = input.trim();\n    if (!text) return;\n\n    // Create an optimistic message (ID is temporary)\n    const tempId = crypto.randomUUID();\n    const optimisticMsg = { \n      id: tempId, \n      content: text, \n      isSending: true \n    };\n\n    // Show it immediately\n    setMessages((prev) => [...prev, optimisticMsg]);\n    setInput('');\n\n    // Send to Supabase\n    const { error } = await supabase.from('messages').insert([{ content: text }]);\n    \n    if (error) {\n      // Remove it if send failed\n      setMessages((prev) => prev.filter(m => m.id !== tempId));\n      alert(\"Failed to send\");\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-zinc-100 p-4 font-sans\">\n      <div className=\"w-full max-w-md bg-white rounded-3xl shadow-2xl overflow-hidden border border-zinc-200 flex flex-col h-[600px]\">\n        \n        {/* Header */}\n        <div className=\"bg-zinc-900 p-6\">\n          <h1 className=\"text-white text-xl font-bold tracking-tight\">Realtime Chat</h1>\n          <div className=\"flex items-center gap-2 mt-1\">\n            <span className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></span>\n            <p className=\"text-zinc-400 text-xs font-medium uppercase tracking-wider\">Online</p>\n          </div>\n        </div>\n\n        {/* Message Area */}\n        <div \n          ref={scrollRef}\n          className=\"flex-1 overflow-y-auto p-6 flex flex-col gap-4 bg-white scroll-smooth\"\n        >\n          {messages.map((msg) => (\n            <div \n              key={msg.id} \n              className={`\n                animate-message p-3 px-4 rounded-2xl max-w-[85%] text-sm transition-all duration-500\n                ${msg.isSending \n                  ? 'bg-zinc-100 self-end rounded-br-none' \n                  : 'bg-blue-600 text-white self-end rounded-br-none shadow-md shadow-blue-200'\n                }\n              `}\n            >\n              {msg.isSending ? <LoadingDots /> : msg.content}\n            </div>\n          ))}\n        </div>\n\n        {/* Input Form */}\n        <form onSubmit={sendMessage} className=\"p-4 bg-zinc-50 border-t border-zinc-100 flex gap-2\">\n          <input \n            className=\"flex-1 bg-white border border-zinc-300 rounded-full px-5 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all placeholder:text-zinc-400\"\n            value={input} \n            onChange={e => setInput(e.target.value)}\n            placeholder=\"Write a message...\"\n          />\n          <button \n            type=\"submit\"\n            className=\"bg-blue-600 hover:bg-blue-700 text-white w-11 h-11 rounded-full flex items-center justify-center transition-all active:scale-90 shadow-lg shadow-blue-100\"\n          >\n            <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\"></line>\n              <polygon points=\"22 2 15 22 11 13 2 9 22 2\"></polygon>\n            </svg>\n          </button>\n        </form>\n        \n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 281, "column": 0}, "map": {"version":3,"sources":["file:///Users/ccayno/Documents/chaelri.github.io/my-realtime-app/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 300, "column": 0}, "map": {"version":3,"sources":["file:///Users/ccayno/Documents/chaelri.github.io/my-realtime-app/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4IACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file:///Users/ccayno/Documents/chaelri.github.io/my-realtime-app/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4IACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}